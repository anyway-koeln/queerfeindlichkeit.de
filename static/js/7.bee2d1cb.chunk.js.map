{"version":3,"sources":["pages/Survey.module.css","components/Question.module.css","components/GeoInput.module.css","hooks/useKeyPress.js","functions/computeHasValue.js","components/GeoInput.js","components/Question.js","questions.yaml","pages/Survey.js"],"names":["module","exports","useKeyPress","keys","callback","useEffect","onKeyup","event","includes","key","window","addEventListener","removeEventListener","computeHasValue","value","options","min","Infinity","max","hasValue","Set","size","Array","isArray","length","String","isNaN","Object","MapScale","map","L","control","scale","addTo","MapSearch","withLocalization","getString","onChange","useState","typingTimeout","setTypingTimeout","provider","setProvider","OpenStreetMapProvider","params","email","handleChange","useCallback","clearTimeout","setTimeout","search","query","target","then","result","fitBounds","bounds","lat","y","lng","x","className","classes","searchInput","type","placeholder","MapZoom","handleZoomIn","zoomIn","handleZoomOut","zoomOut","zoomButtonsWrapper","zoomButton","onClick","geoPrecision","geoShift","GeoInput","defaultValue","setMap","defaultValueLatLng","split","parseFloat","markerPos","setMarkerPos","preciseMarkerPos","setPreciseMarkerPos","rectangle","useRectangle","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","saveMapPos","roundedLat","Math","round","roundedLng","handleMapClick","latlng","handleMap","newMap","mapWrapper","Map","center","zoom","scrollWheelZoom","zoomControl","whenReady","TileLayer","attribution","url","Circle","radius","fillOpacity","color","Rectangle","fillColor","weight","lineCap","lineJoin","abc","ABC","toUpperCase","keys2listen","fluentByObject","_id","question","description","input","defaultValueObject","onSubmit","inputRef","useRef","setHasValue","firstDefaultValue","writeInDefaultValue","write_in","setValue","writeInValue","setWriteInValue","JSON","stringify","setValueJSON","setValueBoth","newValue","writeInIsActive","setWriteInIsActive","niceValue","hasValueNew","current","blur","required","index","indexOf","option","multiple","has","delete","add","oldValue","storeValue","newValueSet","storeNumberValue","storeGeoValue","storeWriteInValue","handleWriteInFocus","handleWriteInBlur","handleChoiceClick","handleSubmit","input_component","ref","onFocus","onBlur","thisOption","title","style","whiteSpace","display","marginBottom","button_key","margin","verticalAlign","fontWeight","fill","console","log","Localized","id","vars","latLngText","filter","Boolean","line","elems","strong","submit_incident","gql","getValueTitle","de","getValueTitleElement","Survey","uploaded","setUploaded","questions","setQuestions","questionsById","setQuestionsById","answers","setAnswers","currentQuestionsIndex","setCurrentQuestionsIndex","useMutation","onCompleted","onError","error","umami","trackEvent","submitIncident","mutationLoading","loading","mutationError","a","fetch","questions_path","response","text","data","yaml","load","dataForArray","parse","dataForObject","entries","questionEntry","thisQuestionData","optionsEntry","reduce","obj","load_data","prevQuestion","nextQuestion","toTheBeginning","gotoFirstQuestion","nodeName","handleSendData","answersForSending","values","answer","warn","thisQuestion","variables","properties","ignoreResults","handleDownloadData","answersForDownload","now","Date","toISOString","nowForFilename","replace","textToWrite","fileNameToSaveAs","textFileAsBlob","Blob","downloadLink","document","createElement","download","innerHTML","webkitURL","href","createObjectURL","URL","onclick","parentNode","removeChild","body","appendChild","click","saveTextAsFile","thisValue","join","currentQuestion","answersArray","survey","progress","opacity","content","contentWrapper","rel","actions","disabled"],"mappings":"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","file":"static/js/7.bee2d1cb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"survey\":\"Survey_survey__1FA27\",\"progress\":\"Survey_progress__2sfK1\",\"content\":\"Survey_content__3KwW1\",\"contentWrapper\":\"Survey_contentWrapper__n5nmh\",\"actions\":\"Survey_actions__27Ee9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"question\":\"Question_question__1iSNS\",\"button_key\":\"Question_button_key__1i8i4\",\"option\":\"Question_option__3f0DC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapWrapper\":\"GeoInput_mapWrapper__3HwMS\",\"map\":\"GeoInput_map__3L-Nl\",\"searchInput\":\"GeoInput_searchInput__1aYZ2\",\"zoomButtonsWrapper\":\"GeoInput_zoomButtonsWrapper__Nxaw_\",\"zoomButton\":\"GeoInput_zoomButton__n1Agi\"};","import { useEffect } from 'react'\n\nexport default function useKeyPress(keys, callback) {\n  useEffect(() => {\n    function onKeyup(event) {\n      if (keys.includes(event.key)) {\n        callback(event)\n      }\n    }\n    window.addEventListener('keyup', onKeyup)\n    return () => window.removeEventListener('keyup', onKeyup)\n  }, [keys, callback])\n}\n","export default function computeHasValue(value, options) {\n  const {\n    min = -Infinity,\n    max = Infinity\n  } = options || {}\n\n  let hasValue = false\n  if (typeof value === 'object' && value instanceof Set && value.size > 0) {\n    hasValue = true\n  } else if (Array.isArray(value) && value.length > 0) {\n    hasValue = true\n  } else if ((typeof value === 'string' || value instanceof String) && value.length > 0) {\n    hasValue = true\n  } else if (typeof value === 'number' && !isNaN(value)) {\n    if (value >= min && value <= max) {\n      hasValue = true\n    } else {\n      hasValue = false\n    }\n  } else if (typeof value === 'object' && value !== null && Object.keys(value).length > 0) {\n    hasValue = true\n  }\n  return hasValue\n}\n","import { useState, useEffect, useCallback } from 'react'\n\nimport { IonButton } from '@ionic/react'\n\nimport { withLocalization } from './fluent/Localized.js'\n\nimport { Map, TileLayer, Circle, Rectangle } from 'react-leaflet'\nimport 'leaflet/dist/leaflet.css'\n\nimport { OpenStreetMapProvider } from 'leaflet-geosearch'\n\nimport classes from './GeoInput.module.css'\nimport './GeoInputLeaflet.css'\n\nimport iconRetinaUrl from 'leaflet/dist/images/marker-icon-2x.png'\nimport iconUrl from 'leaflet/dist/images/marker-icon.png'\nimport shadowUrl from 'leaflet/dist/images/marker-shadow.png'\n\nfunction MapScale({ map }) {\n  useEffect(() => {\n    if (!!map) {\n      window.L.control.scale().addTo(map)\n    }\n  }, [map])\n\n  return null\n}\n\nfunction MapSearchTemp({ getString, map, onChange }) {\n  const [typingTimeout, setTypingTimeout] = useState()\n\n  const [provider, setProvider] = useState()\n\n  useEffect(() => {\n    setProvider(new OpenStreetMapProvider({ // TODO: Add more providers as a backup. And propably proxy through our api server.\n      params: {\n        email: 'tech@queerfeindlichkeit.de', // auth for large number of requests\n      },\n    }))\n  }, [setProvider])\n\n  const handleChange = useCallback(event => {\n    clearTimeout(typingTimeout)\n    setTypingTimeout(setTimeout(()=>{\n      if (!!provider && !!map) {\n        provider.search({ query: event.target.value })\n          .then(function (result) {\n            if (result.length > 0) {\n              map.fitBounds(result[0].bounds)\n              onChange({ lat: result[0].y, lng: result[0].x })\n              // map.setView({ lng: result[0].x, lat: result[0].y })\n            }\n          })\n      }\n    }, 500))\n  }, [typingTimeout, setTypingTimeout, provider, map, onChange])\n\n  return <input\n    className={classes.searchInput}\n    type=\"text\"\n    onChange={handleChange}\n    placeholder={getString('placeholder_search')}\n  />\n}\nconst MapSearch = withLocalization(MapSearchTemp)\n\nfunction MapZoom({ map }) {\n  const handleZoomIn = useCallback(event => {\n    if (!!map) {\n      map.zoomIn(1)\n    }\n  }, [map])\n\n  const handleZoomOut = useCallback(event => {\n    if (!!map) {\n      map.zoomOut(1)\n    }\n  }, [map])\n\n  return <div className={classes.zoomButtonsWrapper}>\n    <IonButton className={classes.zoomButton} onClick={handleZoomIn}>+</IonButton>\n    <IonButton className={classes.zoomButton} onClick={handleZoomOut}>-</IonButton>\n  </div>\n}\n\nconst geoPrecision = 100\nconst geoShift = 0.5 / geoPrecision\n\nfunction useRectangle({ lat, lng }) {\n  return [\n    [lat - geoShift, lng - geoShift],\n    [lat + geoShift, lng + geoShift],\n  ]\n}\n\nfunction GeoInput({ onChange, defaultValue }) {\n  const [map, setMap] = useState()\n\n  const defaultValueLatLng = (defaultValue || '').split(',').map(value => parseFloat(value))\n\n  const [markerPos, setMarkerPos] = useState({ lat: defaultValueLatLng[0] || 0, lng: defaultValueLatLng[1] || 0 })\n  const [preciseMarkerPos, setPreciseMarkerPos] = useState(markerPos)\n  const rectangle = useRectangle(markerPos)\n\n  useEffect(() => {\n    const L = window.L\n\n    delete L.Icon.Default.prototype._getIconUrl\n\n    L.Icon.Default.mergeOptions({\n      iconRetinaUrl,\n      iconUrl,\n      shadowUrl\n    })\n  }, [])\n\n  const saveMapPos = useCallback(({ lat, lng }) => {\n    let roundedLat = Math.round(lat * geoPrecision) / geoPrecision\n    let roundedLng = Math.round(lng * geoPrecision) / geoPrecision\n\n    if (roundedLat === markerPos.lat && roundedLng === markerPos.lng) {\n      roundedLat = 0\n      roundedLng = 0\n      lat = 0\n      lng = 0\n    }\n\n    setPreciseMarkerPos({ lat, lng })\n    setMarkerPos({ lat: roundedLat, lng: roundedLng })\n\n    if (roundedLat === 0 && roundedLng === 0) {\n      onChange(null)\n    } else {\n      onChange(`${roundedLat}, ${roundedLng}`)\n    }\n  }, [markerPos, setPreciseMarkerPos, setMarkerPos, onChange])\n\n  const handleMapClick = useCallback((event) => {\n    // if (event.originalEvent.target.classList.contains('leaflet-container')) { // check if event is coming from the map\n      let { lat, lng } = event.latlng\n      saveMapPos({ lat, lng })\n    // }\n  }, [saveMapPos])\n\n  const handleMap = useCallback((newMap) => {\n    setMap(newMap.target)\n  }, [setMap])\n\n  return <div className={classes.mapWrapper}>\n    <MapSearch map={map} onChange={saveMapPos}/>\n    <MapZoom map={map} />\n    <Map\n      className={classes.map}\n      center={[51.2964955, 9.9019876]}\n      zoom={5.5}\n      scrollWheelZoom={false}\n      zoomControl={false}\n      whenReady={handleMap}\n      onClick={handleMapClick}\n    >\n      {/* <TileLayer\n        attribution='© <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      /> */}\n      {/* <TileLayer\n        attribution='© <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors | © <a href=\"https://carto.com/attributions\" target=\"_blank\" rel=\"noreferrer\">CARTO</a>'\n        url=\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\"\n        subdomains=\"abcd\"\n        maxZoom={19}\n      /> */}\n      {/* <TileLayer\n        attribution='© <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors'\n        url=\"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\"\n        subdomains=\"ab\"\n        maxZoom={19}\n      /> */}\n      <TileLayer\n        attribution='<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">© OpenStreetMap</a> <a href=\"https://www.mapbox.com/about/maps/\" target=\"_blank\" rel=\"noreferrer\">© Mapbox</a>'\n        url=\"https://api.mapbox.com/styles/v1/qiekub/cko1ikam20wgq18p9wd200uy0/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoicWlla3ViIiwiYSI6ImNrbzFpY3NtZjA4dXQyb3M1OGU5czNqZzYifQ.UFFb9Vh5VldqZzdjempXPQ\"\n      />\n\n      {\n        preciseMarkerPos.lat !== markerPos.lat && preciseMarkerPos.lng !== markerPos.lng\n        ? <Circle center={preciseMarkerPos} radius={5} {...{ fillOpacity: 1, color: 'var(--primary-dark, black)' }} />\n        : null\n      }\n      {\n        markerPos.lat !== 0 && markerPos.lng !== 0\n        ? <Rectangle bounds={rectangle} {...{ fillColor: 'var(--primary, black)', color: 'var(--primary-dark, black)', fillOpacity: 0.3, weight: 5, lineCap: 'square', lineJoin: 'square' }} />\n        : null\n      }\n      <MapScale map={map} />\n    </Map>\n  </div>\n}\n\nexport default GeoInput\n","import { useCallback, useEffect, useState, useRef } from 'react'\nimport useKeyPress from '../hooks/useKeyPress.js'\nimport computeHasValue from '../functions/computeHasValue.js'\n\nimport { IonButton } from '@ionic/react'\n\nimport { withLocalization, Localized } from './fluent/Localized.js'\n\nimport classes from './Question.module.css'\nimport GeoInput from './GeoInput.js'\n\nlet abc = 'abcdefghijklmnopqrstuvwxyz'\nconst ABC = abc.toUpperCase().split('')\nabc = abc.split('')\nconst keys2listen = ['Escape', 'Enter', ...abc, ...ABC]\n\nfunction Question({ fluentByObject, getString, _id, question, description, input = {}, defaultValue: defaultValueObject, onSubmit }) {\n  const inputRef = useRef()\n  const [hasValue, setHasValue] = useState(false)\n\n  const defaultValue = !!defaultValueObject ? defaultValueObject.value : new Set()\n  let firstDefaultValue = [...defaultValue]\n  if (firstDefaultValue.length > 0) {\n    firstDefaultValue = firstDefaultValue[0]\n  } else {\n    firstDefaultValue = null\n  }\n  const writeInDefaultValue = !!defaultValueObject ? defaultValueObject.write_in : null\n\n  const [value, setValue] = useState(defaultValue)\n  const [writeInValue, setWriteInValue] = useState(writeInDefaultValue)\n\n  const [, setValueJSON] = useState(JSON.stringify([...value]))\n\n  const setValueBoth = useCallback(newValue => {\n    setValue(newValue)\n    setValueJSON(JSON.stringify([...newValue]))\n  }, [setValue, setValueJSON])\n\n  const [writeInIsActive, setWriteInIsActive] = useState(false)\n\n  let niceValue = value\n  if (input.type === 'number') {\n    niceValue = parseFloat([...value][0])\n  } else if (input.type === 'short_text' || input.type === 'long_text') {\n    niceValue = [...value][0] + ''\n  } else if (input.type === 'choice') {\n    niceValue = [...value]\n  }\n\n  useEffect(() => {\n    const hasValueNew = computeHasValue(niceValue, {\n      min: (typeof input.min === 'number' ? input.min : -Infinity),\n      max: (typeof input.max === 'number' ? input.max : Infinity)\n    })\n    setHasValue(hasValueNew)\n  }, [niceValue, input.type, input.min, input.max, setHasValue])\n\n  useKeyPress(keys2listen, event => {\n    if (event.key === 'Escape') {\n      if (!!inputRef && !!inputRef.current) {\n        inputRef.current.blur()\n      }\n    } if (\n      event.key === 'Enter'\n      && (!input.required || (input.required && hasValue))\n    ) {\n      if (input.type === 'choice' && hasValue) {\n        onSubmit({\n          _id,\n          value,\n          ...(computeHasValue(writeInValue) ? { write_in: writeInValue } : {})\n        })\n      } else if (\n        input.type === 'number'\n        || input.type === 'short_text'\n        || (input.type === 'long_text' && !writeInIsActive)\n      ) {\n        onSubmit({ _id, value })\n      }\n    } else if (input.type === 'choice' && !writeInIsActive) {\n      let index = abc.indexOf(event.key)\n      if (index <= -1) {\n        index = ABC.indexOf(event.key)\n      }\n      if (index >= 0 && input.options[index]) {\n        const option = input.options[index]._id\n\n        if (input.multiple === true) {\n          const newValue = value\n          if (newValue.has(option)) {\n            newValue.delete(option)\n          } else {\n            newValue.add(option)\n          }\n          setValueBoth(newValue)\n        } else {\n          let oldValue = [...value]\n          if (oldValue.length > 0) {\n            oldValue = oldValue[0]\n          } else {\n            oldValue = null\n          }\n\n          const newValue = new Set()\n          if (option !== oldValue) {\n            newValue.add(option)\n          }\n          setValueBoth(newValue)\n\n          if (!!onSubmit && option !== oldValue) {\n            onSubmit({\n              _id,\n              value: newValue,\n              ...(computeHasValue(writeInValue) ? { write_in: writeInValue } : {})\n            })\n          }\n        }\n      }\n    }\n  })\n\n  const storeValue = useCallback(event => {\n    const newValueSet = new Set()\n    newValueSet.add(event.target.value)\n    setValueBoth(newValueSet)\n  }, [setValueBoth])\n\n  const min = !!input ? input.min || -Infinity : -Infinity\n  const max = !!input ? input.max || Infinity : Infinity\n  const storeNumberValue = useCallback(event => {\n    let newValue = parseFloat(event.target.value)\n    if (isNaN(newValue)) {\n      newValue = null\n    } else {\n      if (typeof min === 'number' && newValue < min) {\n        newValue = min\n      } else if (typeof max === 'number' && newValue > max) {\n        newValue = max\n      }\n    }\n\n    const newValueSet = new Set()\n    newValueSet.add(newValue)\n    setValueBoth(newValueSet)\n  }, [setValueBoth, min, max])\n\n  const storeGeoValue = useCallback(value => {\n    const newValueSet = new Set()\n    if (!!value) {\n      newValueSet.add(value)\n    }\n    setValueBoth(newValueSet)\n  }, [setValueBoth])\n\n  // START write in\n  const storeWriteInValue = useCallback(event => {\n    let option = event.target.value\n\n    if (input.type === 'number' && option !== '') {\n      option = parseFloat(option)\n      if (isNaN(option)) {\n        option = null\n      }\n    }\n\n    if (input.multiple === true) {\n      const newValue = value\n      newValue.delete(writeInValue) // delete old value\n      if (newValue.has(option)) {\n        newValue.delete(option)\n      } else if (option !== '') {\n        newValue.add(option)\n      }\n      setValueBoth(newValue)\n    } else {\n      const newValue = new Set()\n      if (option !== '') {\n        newValue.add(option)\n      }\n      setValueBoth(newValue)\n    }\n\n    setWriteInValue(option)\n  }, [input.type, input.multiple, value, writeInValue, setValueBoth, setWriteInValue])\n\n  const handleWriteInFocus = useCallback(() => {\n    setWriteInIsActive(true)\n  }, [setWriteInIsActive])\n\n  const handleWriteInBlur = useCallback(() => {\n    setWriteInIsActive(false)\n  }, [setWriteInIsActive])\n  // END write in\n\n  const handleChoiceClick = useCallback(option => {\n    if (input.multiple === true) {\n      const newValue = value\n      if (newValue.has(option)) {\n        newValue.delete(option)\n      } else {\n        newValue.add(option)\n      }\n      setValueBoth(newValue)\n    } else {\n      let oldValue = [...value]\n      if (oldValue.length > 0) {\n        oldValue = oldValue[0]\n      } else {\n        oldValue = null\n      }\n\n      const newValue = new Set()\n      if (option !== oldValue) {\n        newValue.add(option)\n      }\n      setValueBoth(newValue)\n\n      if (!!onSubmit && option !== oldValue) {\n        onSubmit({\n          _id,\n          value: newValue,\n          ...(computeHasValue(writeInValue) ? { write_in: writeInValue } : {})\n        })\n      }\n    }\n  }, [value, setValueBoth, onSubmit, input.multiple, _id, writeInValue])\n\n  const handleSubmit = useCallback(() => {\n    if (!!onSubmit && (!input.required || (input.required && hasValue))) {\n      onSubmit({\n        _id,\n        value,\n        ...(computeHasValue(writeInValue) ? { write_in: writeInValue } : {})\n      })\n    }\n  }, [input, hasValue, onSubmit, _id, value, writeInValue])\n\n  // auto focus input field\n  useEffect(() => {\n    // if (input.type !== 'choice' && !!inputRef && !!inputRef.current && !hasValue) {\n    //   inputRef.current.focus()\n    // }\n  }, [input.type, inputRef, hasValue])\n\n  // do nothing if no question supplied\n  if (!(!!_id)) {\n    return null\n  }\n\n  let input_component = null\n  if (input.type === 'number') {\n    input_component = <input ref={inputRef} type=\"number\" placeholder={getString('placeholder_number')} min={input.min || -Infinity} max={input.max || Infinity} onChange={storeNumberValue} defaultValue={firstDefaultValue} />\n  } else if (input.type === 'short_text' || input.type === 'date') { // TODO: date sollte ein eigenes echtes input sein, das direkt überprüft, ob es ein echtes Datum ist.\n    input_component = <input ref={inputRef} type=\"text\" placeholder={getString('placeholder_short_text')} onChange={storeValue} defaultValue={firstDefaultValue} />\n  } else if (input.type === 'long_text') {\n    input_component = <textarea\n      ref={inputRef}\n      onChange={storeValue}\n      onFocus={handleWriteInFocus}\n      onBlur={handleWriteInBlur}\n      defaultValue={firstDefaultValue}\n      placeholder={getString('placeholder_long_text')}\n    />\n  } else if (input.type === 'choice') {\n    input_component = <>\n      {\n        !!input.options\n          ? input.options.map((option, index) => {\n            const thisOption = fluentByObject(option)\n\n            let title = null\n            let description = null\n\n            if (typeof thisOption === 'string' || thisOption instanceof String) {\n              title = thisOption\n            } else {\n              if (!!thisOption.title) {\n                title = thisOption.title\n              }\n              if (!!thisOption.description) {\n                description = thisOption.description\n              }\n            }\n\n            if (title === null) {\n              return null\n            }\n\n            return <div\n                key={option._id}\n                className=\"body2\"\n                style={{ whiteSpace: 'nowrap', display: 'flex', marginBottom: '8px' }}\n              >\n              <span className={classes.button_key}>\n                {ABC[index]}\n              </span>\n              <p className=\"body2\" style={{ whiteSpace: 'normal', margin: '0' }}>\n                <IonButton\n                  style={{ verticalAlign: 'middle', margin: '0 0 2px 0', fontWeight: 'bold' }}\n                  fill={value.has(option._id) ? 'solid' : 'outline'}\n                  size=\"small\"\n                  onClick={() => handleChoiceClick(option._id)}\n                >\n                  {title}\n                </IonButton>\n                {\n                  description !== null\n                  ? <span style={{ margin: '0 0 0 8px' }}>{description}</span>\n                  : null\n                }\n              </p>\n            </div>\n          })\n        : null\n      }\n      {\n        !!input.write_in\n          ? <div>\n            <input\n              ref={inputRef}\n              type=\"text\"\n              placeholder={getString('placeholder_write_in_short_text')}\n              onChange={storeWriteInValue}\n              onFocus={handleWriteInFocus}\n              onBlur={handleWriteInBlur}\n              defaultValue={writeInDefaultValue}\n            />\n          </div>\n        : null\n      }\n    </>\n  } else if (input.type === 'geo') {\n    console.log('value', value)\n    input_component = <>\n      <GeoInput onChange={storeGeoValue} defaultValue={firstDefaultValue} />\n      {\n        value.size > 0\n        ? <p><Localized id=\"label_annonymized_coordinates\" vars={{ latLngText: [...value][0] }} /></p>\n        : null\n      }\n    </>\n  }\n\n  return (\n    <div className={classes.question}>\n      <h3 className=\"subtitle1\">{fluentByObject(question)}</h3>\n      {!!description ? fluentByObject(description, '').split('\\n').filter(Boolean).map(line => <p key={line}>{line}</p>) : null}\n      {input.required ? <p style={{ color: 'darkred', fontWeight: 'bold' }}><Localized id=\"required_question\" /></p> : null}\n      {input_component}\n      {\n        (hasValue || !input.required)\n        && (input.type !== 'choice' || input.write_in === true)\n          ? <p>\n            <IonButton style={{ verticalAlign: 'middle', margin: '0 16px 0 0' }} size=\"default\" onClick={handleSubmit}><Localized id=\"submit_question\" /></IonButton>\n            {\n              (\n                input.type === 'number'\n                || input.type === 'short_text'\n                || (input.type === 'long_text' && !writeInIsActive)\n                || (input.type === 'choice' && input.write_in === true && hasValue)\n              )\n              && (!input.required || (input.required && hasValue))\n              ? <span style={{ verticalAlign: 'middle' }}>\n                <Localized id=\"press_enter_info\" elems={{strong: <strong/>}} />\n              </span>\n              : null\n            }\n          </p>\n          : null\n      }\n    </div>\n  )\n}\n\nexport default withLocalization(Question)\n","export default __webpack_public_path__ + \"static/media/questions.ffd0ce87.yaml\";","import { useEffect, useState, useCallback } from 'react'\nimport yaml from 'js-yaml'\n\nimport { IonButton } from '@ionic/react'\n\nimport { Localized } from '../components/fluent/Localized.js'\n\nimport classes from './Survey.module.css'\nimport Question from '../components/Question.js'\nimport useKeyPress from '../hooks/useKeyPress.js'\nimport computeHasValue from '../functions/computeHasValue.js'\n\nimport questions_path from '../questions.yaml'\n\nimport { gql, useMutation } from '@apollo/client'\n\nconst submit_incident = gql`\n  mutation ($text: String, $properties: JSONObject) {\n    incident(text: $text, properties: $properties)\n  }\n`\n\nfunction saveTextAsFile(textToWrite, fileNameToSaveAs) {\n  // source: https://stackoverflow.com/questions/609530/download-textarea-contents-as-a-file-using-only-javascript-no-server-side\n  var textFileAsBlob = new Blob([textToWrite], { type: 'text/plain' })\n  var downloadLink = document.createElement('a')\n  downloadLink.download = fileNameToSaveAs\n  downloadLink.innerHTML = 'Download File'\n  if (window.webkitURL != null) {\n    // Chrome allows the link to be clicked\n    // without actually adding it to the DOM.\n    downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob)\n  }\n  else {\n    // Firefox requires the link to be added to the DOM\n    // before it can be clicked.\n    downloadLink.href = window.URL.createObjectURL(textFileAsBlob)\n    downloadLink.onclick = function () {\n      downloadLink.parentNode.removeChild(downloadLink)\n    }\n    downloadLink.style.display = 'none'\n    document.body.appendChild(downloadLink)\n  }\n\n  downloadLink.click()\n}\n\nconst mainTextQuestion = 'what_happened'\n\nfunction getValueTitle(value, options) {\n  const thisOption = !!options && !!options[value] ? options[value].de : value\n\n  let title = null\n\n  if (typeof thisOption === 'string' || thisOption instanceof String) {\n    title = thisOption\n  } else if (typeof thisOption === 'number' || !isNaN(thisOption)) {\n    title = thisOption + ''\n  } else {\n    if (!!thisOption.title) {\n      title = thisOption.title\n    }\n  }\n\n  return title\n}\n\nfunction getValueTitleElement(value, options) {\n  const title = getValueTitle(value, options)\n\n  if (typeof title === 'string') {\n    return title.split('\\n').map(line => <p key={line}>{line}</p>)\n  }\n\n  return title\n}\n\nfunction Survey() {\n  const [uploaded, setUploaded] = useState(false)\n  const [questions, setQuestions] = useState([])\n  const [questionsById, setQuestionsById] = useState({})\n  const [answers, setAnswers] = useState({})\n  const [currentQuestionsIndex, setCurrentQuestionsIndex] = useState(-1)\n\n  const [submitIncident, { loading: mutationLoading, error: mutationError }] = useMutation(submit_incident, {\n    onCompleted() {\n      setUploaded(true)\n    },\n    onError(error) {\n      if (!!window.umami) {\n        window.umami.trackEvent('Error: Submit-Failed')\n      }\n      console.error(error)\n    }\n  })\n\n  useEffect(() => {\n    async function load_data() {\n      let response = await fetch(questions_path)\n      let text = await response.text() // read response body as text\n\n      const data = yaml.load(text)\n\n      if (!!data && !!data.questions) {\n        const dataForArray = JSON.parse(JSON.stringify(data)) // TODO: Please check, why data needs to be cloned!\n        const dataForObject = JSON.parse(JSON.stringify(data)) // TODO: Please check, why data needs to be cloned!\n\n        setQuestions( // TODO: Somewhere in the following lines, data is would get overwritten if not cloned.\n          Object.entries(dataForArray.questions)\n          .map(questionEntry => {\n            let thisQuestionData = questionEntry[1]\n\n            if (!thisQuestionData.input) {\n              thisQuestionData.input = {}\n            }\n\n            if (!!thisQuestionData.input.options) {\n              thisQuestionData.input.options = Object.entries(thisQuestionData.input.options)\n                .map(optionsEntry => ({\n                  _id: optionsEntry[0],\n                  ...optionsEntry[1]\n                }))\n            }\n\n            return {\n              _id: questionEntry[0],\n              ...thisQuestionData\n            }\n          })\n        )\n\n        setQuestionsById(\n          Object.entries(dataForObject.questions)\n          .reduce((obj, questionEntry) => {\n            const _id = questionEntry[0]\n            let thisQuestionData = questionEntry[1]\n\n            if (!thisQuestionData.input) {\n              thisQuestionData.input = {}\n            }\n            if (!thisQuestionData.input.options) {\n              thisQuestionData.input.options = {}\n            }\n\n            obj[_id] = {\n              _id,\n              ...thisQuestionData\n            }\n\n            return obj\n          }, {})\n        )\n      } else {\n        setQuestionsById({})\n        setQuestions([])\n      }\n    }\n    load_data()\n  }, [setQuestions, setQuestionsById])\n\n  const handleChange = useCallback(data => {\n    if (!!data && !!data._id) {\n      if (computeHasValue(data.value)) {\n        answers[data._id] = data\n      } else if (!!answers[data._id]){\n        delete answers[data._id]\n      }\n      setAnswers(answers)\n    }\n    if (currentQuestionsIndex <= questions.length) {\n      if (!!window.umami) {\n        window.umami.trackEvent('Q-Index: ' + currentQuestionsIndex) // question index\n        if (!!data && !!data._id) {\n          window.umami.trackEvent('A-ID: ' + data._id) // answer id\n        }\n      }\n      setCurrentQuestionsIndex(currentQuestionsIndex + 1)\n    }\n  }, [setAnswers, answers, setCurrentQuestionsIndex, currentQuestionsIndex, questions.length])\n\n  const prevQuestion = useCallback(() => {\n    if (currentQuestionsIndex > -1) {\n      setCurrentQuestionsIndex(currentQuestionsIndex - 1)\n    }\n  }, [setCurrentQuestionsIndex, currentQuestionsIndex])\n\n  const nextQuestion = useCallback(() => {\n    if (currentQuestionsIndex <= questions.length) {\n      if (currentQuestionsIndex <= 0) { // if -1 (intro)\n        setCurrentQuestionsIndex(currentQuestionsIndex + 1)\n      } else { // if between 0 and questions.length\n        const currentQuestion = questions[currentQuestionsIndex]\n        if (!currentQuestion.input.required) {\n          setCurrentQuestionsIndex(currentQuestionsIndex + 1)\n        }\n      }\n    }\n  }, [setCurrentQuestionsIndex, currentQuestionsIndex, questions])\n\n  const toTheBeginning = useCallback(() => {\n    setCurrentQuestionsIndex(-1)\n  }, [setCurrentQuestionsIndex])\n\n  const gotoFirstQuestion = useCallback(() => {\n    setCurrentQuestionsIndex(0)\n  }, [setCurrentQuestionsIndex])\n\n  useKeyPress(['ArrowRight', 'ArrowLeft'], event => {\n    if (event.target.nodeName === 'BODY') {\n      if (event.key === 'ArrowUp' || event.key === 'ArrowLeft') {\n        prevQuestion()\n      } else {\n        nextQuestion()\n      }\n    }\n  })\n\n  const handleSendData = useCallback(() => {\n    if (!!window.umami) {\n      window.umami.trackEvent('Submitting-Incident')\n    }\n\n    let answersForSending = Object.values(answers)\n      .filter(answer => answer._id !== null && answer.value !== null)\n\n    if (answersForSending.length === 0) {\n      console.warn('⚠️ Keine Angaben. Unnötig abzusenden. But this if shoul\\'nt get called anyway.')\n    } else {\n      answersForSending = answersForSending\n        .reduce((obj, answer) => {\n          const thisQuestion = questionsById[answer._id]\n\n          const value = [...answer.value]\n          if (thisQuestion.input.multiple === true) {\n            obj[answer._id] = value\n          } else {\n            obj[answer._id] = value[0]\n          }\n          return obj\n        }, {})\n\n      const text = answersForSending[mainTextQuestion] || ''\n      delete answersForSending[mainTextQuestion]\n\n      submitIncident({\n        variables: {\n          text,\n          properties: answersForSending\n        },\n        ignoreResults: false\n      })\n    }\n  }, [answers, questionsById, submitIncident])\n\n  const handleDownloadData = useCallback(() => {\n    if (!!window.umami) {\n      window.umami.trackEvent('Downloading-Incident')\n    }\n\n    let answersForDownload = Object.values(answers)\n      .filter(answer => answer._id !== null && answer.value !== null)\n\n    if (answersForDownload.length === 0) {\n      console.warn('⚠️ Keine Angaben. Unnötig runterzuladen. But this if shoul\\'nt get called anyway.')\n    } else {\n      let now = new Date().toISOString()\n      now = now.replace(/T/g, ' ')\n      const nowForFilename = now.replace(/(:|\\.)/g, '-')\n\n      answersForDownload = `# Dein Vorfall (${now})\\n\\n${\n        answersForDownload.map(answer => {\n          const thisQuestion = questionsById[answer._id]\n          return `## ${\n            thisQuestion.question.de\n          }\\n\\n${\n            thisQuestion.input.multiple === true\n            ? [...answer.value].map(thisValue => `- ${getValueTitle(thisValue, thisQuestion.input.options)}`).join('\\n')\n            : getValueTitle([...answer.value][0], thisQuestion.input.options)\n          }`\n        }).join('\\n\\n')\n      }`\n\n      saveTextAsFile(answersForDownload, `Dein Vorfall ${nowForFilename}.md.txt`)\n    }\n  }, [answers, questionsById])\n\n  if (!(!!questions)) {\n    return null\n  }\n\n  const currentQuestion = questions[currentQuestionsIndex]\n\n  const answersArray = Object.values(answers)\n    .filter(answer => answer.value !== null)\n\n  return (\n    <div className={classes.survey}>\n      <div className={classes.progress} style={{\n        '--width': `${((currentQuestionsIndex) / questions.length) * 100}%`,\n        opacity: (currentQuestionsIndex <= 0 ? 0 : 1)\n      }} />\n      <div className={classes.content}>\n        <div className={classes.contentWrapper}>\n          {\n            currentQuestionsIndex === -1\n            ? <>\n                <h3>Vorfall melden</h3>\n                <p>Hier kannst du einen queerfeindlichen Vorfall melden.</p>\n                <p>Deine Daten dienen lediglich zur statistischen Auswertung. Sie führen nicht zu einer Anzeige bei der Polizei. Wir speichern deine Daten anonymisiert.</p>\n                <p>Bei Fragen kannst du dich an <a href=\"mailto:info@queerfeindlichkeit.de\" target=\"_blank\" rel=\"noreferrer\">info@queerfeindlichkeit.de</a> wenden oder uns bei Instagram eine Nachricht schicken: <a href=\"https://instagram.com/queerfeindlichkeit\" target=\"_blank\" rel=\"noreferrer\">@queerfeindlichkeit</a></p>\n                <IonButton size=\"default\" onClick={gotoFirstQuestion}><Localized id=\"start_survey\" /></IonButton>\n            </>\n            : (\n              !!currentQuestion\n              ? <>\n                <Question\n                  key={currentQuestion._id}\n                  onSubmit={handleChange}\n                  defaultValue={answers[currentQuestion._id] || null}\n                  {...currentQuestion}\n                />\n              </>\n              : (\n                answersArray.length === 0\n                ? <>\n                  <h3>Hmmm…</h3>\n                  <p>Du hast keine Angaben gemacht. Beschreib deinen Vorfall bitte etwas detailierter.</p>\n                  <IonButton size=\"default\" onClick={toTheBeginning}><Localized id=\"back_to_beginning\" /></IonButton>\n                </>\n                : (\n                  uploaded\n                  ? <>\n                    <h3>Vielen Dank!</h3>\n                    <p>Dein Vorfall wurde hochgeladen.</p>\n                    <p><strong>Vielen Dank, dass Du hilfst Queerfeindlichkeit sichtbar zu machen!</strong></p>\n                            <p>Du möchtest wissen, wie es weitergeht? Auf <a href=\"https://www.instagram.com/queerfeindlichkeit/\" target=\"_blank\" rel=\"noreferrer\">Instagram</a> und  <a href=\"https://twitter.com/anyway_koeln\" target=\"_blank\" rel=\"noreferrer\">Twitter</a> veröffentlichen wir Daten und helfen dir gegen Queerfeindlichkeit anzukommen.</p>\n                    <hr />\n                    <p>Hier kannst du dir noch Deine Daten abspeichern:</p>\n                    <IonButton size=\"default\" onClick={handleDownloadData}><Localized id=\"download_your_incident_data\" /></IonButton>\n                  </>\n                  : <>\n                    <h3>Deine Angaben</h3>\n                    <p>Hier kannst du nochmal über deine Angaben drüber schauen.<br />Geh gerne zurück, um etwas zu korrigieren.</p>\n                    <p>Wenn du zufrieden bist, klick unten auf <strong>„Vorfall eintragen”</strong>.</p>\n                    <p>Er wird in den nächsten Tagen von unseren Ehrenamtlichen gesichtet und veröffentlicht.</p>\n                    <p>Deine Daten kannst du dir unter <strong>„Daten runterladen”</strong>abspeichern.</p>\n                    <hr />\n                    {\n                      answersArray.map(answer => {\n                        const thisQuestion = questionsById[answer._id]\n\n                        return <div key={answer._id}>\n                          <div className=\"subtitle1\">{thisQuestion.question.de}</div>\n                          {\n                            thisQuestion.input.multiple === true\n                              ? <div><ul>\n                                {[...answer.value].map(thisValue => <li key={thisValue}>{getValueTitleElement(thisValue, thisQuestion.input.options)}</li>)}\n                              </ul></div>\n                              : getValueTitleElement([...answer.value][0], thisQuestion.input.options)\n                          }\n                        </div>\n                      })\n                    }\n                    <hr />\n                    <IonButton fill=\"outline\" size=\"default\" onClick={handleDownloadData}><Localized id=\"download_your_incident_data\" /></IonButton>\n                    <IonButton size=\"default\" onClick={handleSendData}><Localized id=\"submit_incident\" /></IonButton>\n                    {mutationLoading && <p><Localized id=\"uploading\" /></p>}\n                    {mutationError && <p><Localized id=\"error_while_uploading\" /></p>}\n                  </>\n                )\n              )\n            )\n          }\n        </div>\n      </div>\n      <div className={classes.actions}>\n        <IonButton disabled={currentQuestionsIndex <= -1} fill=\"outline\" size=\"default\" onClick={prevQuestion}>\n          <Localized id=\"prev\" />\n        </IonButton>\n        <IonButton disabled={currentQuestionsIndex >= questions.length || (!!currentQuestion && !!currentQuestion.input && currentQuestion.input.required)} fill=\"outline\" size=\"default\" onClick={nextQuestion}>\n          <Localized id=\"next\" />\n        </IonButton>\n      </div>\n    </div>\n  )\n}\n\nexport default Survey\n"],"sourceRoot":""}